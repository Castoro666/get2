{% extends "base.html" %}
{% load static %}
{% block head %}
<link type="text/css" href="{% static "Aristo/Aristo.css" %}" rel="stylesheet" />
<script type="text/javascript" src="{% static "jquery-ui.js" %}"></script>
{% endblock %}


{% block menu2 %}

<div id="navigazione">
<div class="nav-solo nav"><span class="persone-nav"> Persone</span></div>
</div>

<ul>
<li class="nuovo-persona"><a href="/persone/nuovo">Nuova persona</a></li>
<li class="cerca"><a href="#">Cerca persona</a></li>

</ul>

{% endblock %}

{% block main %}

<table>
<tr class="intestazione">
<td>Nome</td><td>Mansioni</td><td>Operazioni</td>
</tr>
{% for persona in persone %}

	<tr class="persona {% cycle 'riga1' 'riga2' %}" id="persona-{{persona.id}}">
	<td class="nome">{{persona}}</td>
	<td class="mansioni">{% for m in persona.competenze.all %} {{m}} {% endfor %}</td>
	<td class="operazioni"><a href="/persone/modifica/{{persona.id}}"><span class="img_modifica"></span></a>
		<a href="#" onclick='$("#elimina-persona-{{persona.id}}" ).dialog("open");'><span class="img_elimina"></span></a>
	</td>
	</tr>
	<script>
	$(function() {
		$( "#elimina-persona-{{persona.id}}" ).dialog({
			resizable: false,
			modal: true,
			autoOpen: false,
			buttons: {
				"Elimina": function() {
					Dajaxice.get2.calendario.elimina_persona(Dajax.process,{'persona_id':{{persona.id}}});
					$( this ).dialog( "close" );
				},
				Cancel: function() {
					$( this ).dialog( "close" );
				}
			}
		});
	});
	
	</script>
	<div id="elimina-persona-{{persona.id}}" title="Elimina {{persona}}">
	<p>
		<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 50px 0;"></span>
		Vuoi veramente eliminare {{persona}}?
	</p>
	</div>

{% endfor %}
</table>


{% endblock %}
